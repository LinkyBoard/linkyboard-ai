- [x] TAG, Category 어떻게 관리할지 고민해야함
  - 태그, 카테고리 외래키 없이 관리됨
  - 마스터 테이블로 관리되며 사용자 통계가 여기에 저장됨
  - 일관성을 어떻게 유지할지 고민해야함
  - 태그, 카테고리 테이블을 따로 만들어서 관리할지, 지금 상황을 유지할지 고민

> 마스터 테이블로 관리하는 방향으로 진행하기로 함

- [ ] langfuse 환경 분리 필요
  - 운영, 개발 환경 분리 필요
  - self-host로 분리
    - Trace 삭제가 늦음
    - 운영 환경에서는 많이 쌓일수록 과금의 위험 발생
    - 보안 이슈

- [ ] Loki 연결
  - 로그 관리 방안 필요
  - ?: Spring boot 와 같은 서버를 쓸지, 분리할지 고민

- [ ] chart 작성
  - k8s 를 사용하여 운영 환경 구성
  - 이를 위한 chart 생성
  - langfuse, loki 등 운영에서 사용하는 컴포넌트도 관리 필요

- [ ] 유튜브 자막 추출 방법 고도화 필요
  - whisper ai 사용하여 mp4 파일에서 자막 추출하는 방법 고려
  - 유튜브 transcript api 에서 자막이 없는 경우를 산정해야함
  - 자막이 없는 경우 whisper ai 로 자막 추출 시도
  - 추출한 자막에 대한 저장 방법 고민, 캐싱
  - 비용 절약 방법 고민 그록 사용

- [ ] 사용자 입력 프롬프트 관리 방안 고민
  - 프롬프트 관리 방안 고민 필요
  - 프롬프트 버전 관리 (변경 이력)
  - 프롬프트와 사용 인공지능 모델 확인 필요

- [ ] RAG 에이전틱 도구로 변경
  - 사전 관련 문서 찾고, 넘겨주는 방식이 아닌
  - 에이전트에서 판단하여 리트리버를 호출할 수 있도록 고려

- [ ] 에이전틱 도구 흐름 설계
  - 에이전트 도구 흐름 설계 필요
  - 도구 목록 정의
  - 도구별 입력, 출력 정의
  - 요청별 도구 사용 요청 받을 수 있도록

- [ ] 청크 전략에 따른 텍스트 분할 적용 필요
  - 현재는 토큰 기반 분할만 적용되어 있음
  - 청크 전략에 따른 분할 로직 적용 필요
  - 문장, 단락 기반 분할 로직 추가 고려

- [ ] 임베딩 백그라운드 워커로 분리
  - 임베딩 생성 작업을 백그라운드 워커로 분리 고려
  - 작업 큐를 사용하여 비동기 처리
  - 사용자 요청에 대한 응답 속도 개선

- [ ] Spring Boot 통신 MQ 도입 고려
  - Spring Boot 와의 통신을 위한 메시지 큐 도입 고려
  - RabbitMQ, Kafka 등 메시지 큐 솔루션 검토
  - 비동기 통신을 통한 시스템 확장성 향상

- [ ] 사용자 스티커도 저장하고, 검색할 수 있도록 해야함
  - 사용자 스티커 저장 (동기화) 기능 구현, 스프링 부트로부터 연동
  - 사용자 스티커 검색 기능 구현
  - 스티커 메타데이터 관리 방안 고민

- [ ] 4번 작업 마무리
  - 테스트 추가 (선택 사항)
  - SearchFilters Pydantic 모델로 변환 (현재 dataclass)
  - hybrid_search의 fetch_limit 로직 개선 (현재 page * size * 2, 최대 100)
  - 에러 핸들링 추가 (embedding 생성 실패 시 등)

- [ ] 태그, 카테고리 개인화 고도화
  - 사용자별 태그, 카테고리 관리 방안 고민
  - 사용자 통계 기반 태그, 카테고리 추천 기능 구현 고려
  - 사용자 프로필 기반 태그, 카테고리 관리 방안 고민

- [ ] /ask 고도화
  - 토픽 기반 질의 고려
  - 토픽 정보를 저장해야할 수 있음

- [ ] router = APIRouter(dependencies=[Depends(verify_internal_api_key)],) 적용 검토
  - 내부 API 키 검증이 필요한 라우터에 적용
  - 코드 중복 제거 및 유지보수성 향상

- [ ] AI_Mock 테스트 케이스 추가
  - AI_Mock 클래스에 대한 테스트 케이스 작성
  - 다양한 시나리오에 대한 테스트 커버리지 확보
